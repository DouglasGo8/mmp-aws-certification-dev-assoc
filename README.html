<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>AWS Certification - Developer Associate 2021</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;-webkit-tap-highlight-color:transparent}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>AWS Certification - Developer Associate 2021</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p><strong><em>This course includes Quarkus v2.x, Eclipse Vert.x 4.x, Apache Camel Quarkus v2.x and Terraform v1.x</em></strong></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<strong><em>Install JSON Viewers on Browser</em></strong>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<strong><em>Why we need Cloud?</em></strong>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Considering an Online Shop App, with peak load during a black friday, but you have less load out this time, this mean waste resources in idle loads, company bought infrastructure to wait that such load, and the company falls in</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Low infrastructure utilization</p>
</li>
<li>
<p>Needs ahead of time planning</p>
</li>
<li>
<p>High costs of procuring infrastructure</p>
</li>
<li>
<p>Dedicated infrastructure maintenance team</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 lead">
<h2 id="_aws_secret_generation">AWS Secret Generation</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ssh-keygen -f {{PEM_FILE}}.pem
sudo ssh-keygen -e -m RFC4716 -f {{PEM_FILE}}.pem
sudo chmod 600 /path/{{PEM_FILE}}.pem
sudo chmod 755 /path_of_pems
ssh -i {{pem}} ec2-user@{{PUBLIC_IP}}
ssh -i {{pem}} ubuntu@{{PUBLIC_IP}}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1 lead">
<h2 id="_aws_ecr_quarkus_push_image_using_temp_token_in_config">AWS ECR Quarkus push image using temp token in config</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn clean -DskipTests package -Pnative -Dquarkus.native.container-build=true
docker build -f src/main/docker/Dockerfile.native -t myapp .
aws ecr get-login-password --region sa-east-1
aws ecr get-login-password \
  --region sa-east-1 | docker login --username AWS --password-stdin \
  {{AWS_ACCOUNT_ID}}.dkr.ecr.sa-east-1.amazonaws.com
docker tag myapp {{AWS_ACCOUNT_ID}}.dkr.ecr.sa-east-1.amazonaws.com/aws-dev-repo:myapp

# docker run --rm --name myapp -p 8080:8080 myapp # only local test purpose - must be remove after test
docker push {{AWS_ACCOUNT_ID}}.dkr.ecr.sa-east-1.amazonaws.com/aws-dev-repo:myapp</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aws_ecr_login_output">AWS ECR Login output</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The <mark><strong><em>aws ecr get-login..</em></strong></mark> up command will generate the following message</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">WARNING! Your password will be stored unencrypted in {{YOUR_PATH}}/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded</code></pre>
</div>
</div>
<div class="ulist lead">
<ul>
<li>
<p>With the Cloud you buy (renting just needed Resources), and release it when not need them, On-demand resource provisioning offer low costs (pay per use)</p>
</li>
<li>
<p>No upfront planning needed</p>
</li>
<li>
<p>Avoiding "Undifferentiated heavy lifting"</p>
</li>
<li>
<p>AWS provides most of 200+ services</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
All links used as ref during this course and challenges
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://aws.amazon.com/">AWS Cloud</a></p>
</li>
<li>
<p><a href="https://{{YOUR_IAM_ID}}.signin.aws.amazon.com/console">IAM User AWS Console</a></p>
</li>
<li>
<p><a href="https://camel.apache.org/">Apache Camel</a></p>
</li>
<li>
<p><a href="https://camel.apache.org/camel-quarkus/latest/">Apache Camel Extensions for Quarkus</a></p>
</li>
<li>
<p><a href="https://quarkus.io/">Quarkus</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/building-native-image">Building a Native Executable</a></p>
</li>
<li>
<p><a href="https://code.quarkus.io/">Quarkus Coding</a></p>
</li>
<li>
<p><a href="https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/#links">Asciidoctor Docs</a></p>
</li>
<li>
<p><a href="https://www.pgadmin.org/download/pgadmin-4-apt/">pgAdmin4 APT</a></p>
</li>
<li>
<p><a href="https://gmusumeci.medium.com/how-to-deploy-aws-ecs-fargate-containers-step-by-step-using-terraform-545eeac743be">Deploy ECS Fargate Containers</a></p>
</li>
<li>
<p><a href="https://github.com/duduribeiro/terraform_ecs_fargate_example">Terraform ECS Fargate</a></p>
</li>
<li>
<p><a href="https://engineering.finleap.com/posts/2020-02-20-ecs-fargate-terraform/">ECS and Fargate Terraform</a></p>
</li>
<li>
<p><a href="https://github.com/turnerlabs/terraform-ecs-fargate/tree/master/env/dev">ECS Template Fargate</a></p>
</li>
<li>
<p><a href="https://github.com/DouglasGo8/terraform-udemy/tree/master/section-8">ECS EC2 Autoscaling</a></p>
</li>
<li>
<p><a href="https://hands-on.cloud/terraform-recipe-managing-auto-scaling-groups-and-load-balancers/">Managing Auto Scaling Groups &amp; Load Balancers</a></p>
</li>
<li>
<p><a href="https://github.com/DouglasGo8/aws-cert-dev-udemy/blob/master/section04-asg:asg/autosale/main.tf">AWS Cert Dev</a></p>
</li>
<li>
<p><a href="https://github.com/Einsteinish/Terraform-Turotials/tree/master/Docker-Nginx-ALB-3-Containers-in-Private-Subnets-with-Dynamic-ASG">Nginx with ASG</a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/writing-native-applications-tips">Tips for writing native applications </a></p>
</li>
<li>
<p><a href="https://quarkus.io/guides/amazon-lambda-http">AWS Lambda with RestEasy, Undertow or Vert.x Web</a></p>
</li>
<li>
<p><a href="https://aws.amazon.com/pt/blogs/aws-brasil/integracao-do-aws-lambda-com-o-quarkus/">Integração do AWS Lambda com o Quarkus</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=geio38-zAdI">Quarkus #47: AWS Lambda</a></p>
</li>
<li>
<p><a href="https://how-to.vertx.io/aws-native-image-lambda-howto/">AWS Native Image Lambda HowTo</a></p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-java.html">Building Lambda functions with Java</a></p>
</li>
<li>
<p><a href="https://sysgears.com/articles/moving-lambda-function-from-serverless-to-terraform/">Moving Lambda function from Serverless to Terraform</a>
<mark>-</mark> <a href="https://medium.com/@pra4mesh/aws-lambda-in-java-and-terraform-544da9102e37">AWS Lambda in Java and Terraform</a></p>
</li>
<li>
<p><a href="https://adamtheautomator.com/terraform-aws-lambda/">Terraform and AWS Lambda? Yep. You Can do that.</a></p>
</li>
<li>
<p><a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/lambdas.tf">Git Cumulus Terraform Lambda Code</a></p>
</li>
<li>
<p><a href="https://camel.apache.org/components/3.12.x/aws2-ddb-component.html">AWS 2 DYNAMODB Apache Camel</a></p>
</li>
<li>
<p><a href="https://medium.com/swlh/deploy-aws-lambda-and-dynamodb-using-terraform-6e04f62a3165">Deploy AWS Lambda and DynamoDB Using Terraform</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=28Da0l0MFms">AWS Lambda: Java (Corretto 11) vs. JavaScript</a></p>
</li>
<li>
<p><a href="https://filia-aleks.medium.com/aws-lambda-battle-2021-performance-comparison-for-all-languages-c1b441005fd1">AWS Lambda battle 2021: performance comparison for all languages (cold and warm start)</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
All tips to find possible issues in IaC scripts
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>All public subnets must have the property <strong><em>map_public_ip_on_launch</em></strong> as true</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Section Challenges
</td>
</tr>
</table>
</div>
<div class="sidebarblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Application Load Balance with Quarkus/Camel using AWS Fargate/ECR/ALB and Terraform</p>
</li>
<li>
<p>All resources in terraform were did merge with the links in links Sections</p>
</li>
<li>
<p>All details can be found over ./terraform/</p>
</li>
<li>
<p>Application Load Balance over ASG EC2 (No AMI Custom) in ECR with NGINX Reactjs Container</p>
</li>
<li>
<p>Lambda using JVM/Native Image (GraalVM) with Quarkus/Apache Camel, API Gateway and DynamoDb over Terraform IaC, with only a GET method</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iam_section">IAM Section</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Root User &#8594; IAM User in a group with permissions</p>
</li>
<li>
<p>Never ever use Root User to create or manage resources</p>
</li>
<li>
<p>As Root user type go to IAM console search and create a group and after the user, <strong><em>e.g. DevGroup</em></strong> and their policies &#8594; <strong><em>e.g. DevUser</em></strong>, assign it to a group, provides <strong><em>Programmatic access &amp; AWS Management Console Access</em></strong></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_regions_and_zones">Regions and Zones</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>AWS provides multiple zones classified as regions (20+) that means multiple data centers spread around the world us-east-1 is the most common region used, in general choose that region based on your users and data are located, with regulatory and security compliance needs</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/RegionsAWS.png" alt="RegionsAWS">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ec2_fundamentals">EC2 Fundamentals</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance">Terraform aws_instance</a></p>
</li>
<li>
<p>EC2 Elastic Computer Cloud, represents rented virtual servers, virtual machines billed by second</p>
</li>
<li>
<p>We can create and manage EC2 lifecycle of EC2 instances create load balancers and auto-scaling groups, EC2 have ephemeral volumes, but we can attach permanent storages on them</p>
</li>
<li>
<p>The SSH connection bellow is exclusively to Ubuntu Instances, in that case for AMZ instance must be ec2-user@public_ip</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">ssh -i {{PEM}}.file ubuntu@public_ip
ps up $pid</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Security Groups Rules for EC2 Instances</p>
<div class="ulist">
<ul>
<li>
<p>Security groups are <strong>default deny</strong>, if no rules configured no outbound/inbound traffic is allowed</p>
</li>
<li>
<p>Can specify <strong>allow rules ONLY</strong></p>
</li>
<li>
<p>Can configure <strong>separate rules</strong> for inbound and outbound traffic</p>
</li>
<li>
<p>Can add/delete sg groups to EC2 instances at any time</p>
</li>
<li>
<p>Traffic NOT explicitly allowed by sg <strong>will not reach the EC2 instance any way</strong></p>
</li>
<li>
<p>Security Groups are stateful</p>
</li>
<li>
<p>Timeout over responses is a typically SGs problem</p>
</li>
<li>
<p>Common inbound rules to Security Groups in image bellow</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/UsedTo_SG_InOutBound_Rules.png" alt="UsedTo SG InOutBound Rules">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>There are 270+ instance across 40+ instance types for different workloads to optimized combination of compute(CPU, GPU), memory, disk (storage) and networking</p>
</li>
<li>
<p>Classify a specification</p>
<div class="ulist">
<ul>
<li>
<p>t2.micro</p>
<div class="ulist">
<ul>
<li>
<p>t - instance family</p>
</li>
<li>
<p>2 - generation, improvements with each gen.</p>
</li>
<li>
<p>micro - size (nano &lt; micro &lt; small &lt; medium &lt; large &lt; xlarge &lt; &#8230;&#8203;) <mark>As sizes increases how much cpu/memory/storage/networking must increase proportionately</mark></p>
</li>
<li>
<p>Using metadata information over EC2 to get details about the instance (Runs the commands inside the EC2 Machine)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo su
curl http:://169.254.169.254/latest/meta-data/
curl http:://169.254.169.254/latest/meta-data/ami-id
curl http:://169.254.169.254/latest/dynamic/instance-identity</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Sample of using http:://169.254.169.254/latest/dynamic/instance-identity/document</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/EC2_Metadata_Dynamic_Intance_identity_Document.png" alt="EC2 Metadata Dynamic Intance identity Document">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Terraform Sample to EC2 AMZ AMI using httpd Web Server</strong> the curl command bellow is not recommended here just to Test</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/View_Change_EC2_UserData.png" alt="Change/View User Data on EC2 Instance">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform">resource &quot;aws_instance&quot; &quot;aws-ec2-micro-instance&quot; {
  ami                    = lookup(var.amis, var.region)
  instance_type          = &quot;t2.micro&quot;
  vpc_security_group_ids = [&quot;${data.aws_security_group.allow-ssh.id}&quot;]
  key_name               = aws_key_pair.key-pub.key_name
  user_data = &lt;&lt;EOF
    #!/bin/bash
    sudo su
    yum update -y
    yum -y install httpd.x86_64
    sudo systemctl enable httpd
    sudo systemctl start httpd
    curl -s http:://{IP_NUMBER}/latest/dynamic/instance-identity/document &gt; /var/www/html/index.html
  EOF

  tags = {
    Name = &quot;aws-ec2-micro-instance&quot;
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>EC2 Rules for Public and Private IPs</p>
<div class="ulist">
<ul>
<li>
<p>IP public are internet accessible</p>
</li>
<li>
<p>IP private are just <strong>internal</strong>/corporate network access</p>
</li>
<li>
<p>Cannot have two resources with the same public IP address</p>
</li>
<li>
<p>Two different corporate nets can have resources with same private IP address</p>
</li>
<li>
<p>All EC2 instances are assigned with IP private address</p>
</li>
<li>
<p>Public IP creation in EC2 can be enabled for EC2 instances in public subnet</p>
</li>
<li>
<p>When you <strong>stop</strong> an EC2 instance, public IP address will be lost, Public IPs are ephemeral, to keep the same ip we need to configure an elastic ip, but is not recommended practice</p>
</li>
<li>
<p>Elastic IP can be switched to another EC2 instance <strong>within the same region</strong>, <strong><em>must be detached manually</em></strong> otherwise it won&#8217;t be released, you are billed when an EIP (Elastic IP) address <strong><em>IS NOT ASSOCIATED</em></strong> with any EC2 instance</p>
</li>
</ul>
</div>
</li>
<li>
<p>Installing OS Patches and software using userdata at launch of EC2 instances <strong>increase boot up</strong> time with appropriated hardening image build</p>
</li>
<li>
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/launch_template#capacity-reservation-specification">AWS EC2 launch Template demo</a></p>
</li>
<li>
<p>AMis contains</p>
<div class="ulist">
<ul>
<li>
<p>Root volume block storage</p>
</li>
<li>
<p>Block device mapping for non-root volumes</p>
</li>
<li>
<p>Can configure and share own AMIs</p>
</li>
<li>
<p>AMIs are stores on S3</p>
</li>
<li>
<p>Always backup your AMIs</p>
</li>
<li>
<p>Below some Important scenarios to EC2</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/EC2_important_Scenarios_pt1.png" alt="EC2 important Scenarios pt1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/EC2_important_Scenarios_pt2.png" alt="EC2 important Scenarios pt2">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aws_elastic_load_balancing">AWS Elastic Load Balancing</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Is a High Available <strong>Managed</strong> AWS service that enables distributed traffic among ec2 instances in one or more AZs in a single region</p>
</li>
<li>
<p>Auto scales to handle huge loads, it can be <strong>PUBLIC</strong> or <strong>PRIVATE</strong></p>
</li>
<li>
<p>Health checks to check route traffic to healthy instances</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Classifying Transport Layers</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">Network Layer</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>IP (Internet Protocol) - Transfer Bytes, unreliable</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Transport Layers</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>TCP (Transmission Control) - Reliability &gt; Performance</p>
</li>
<li>
<p>TLS (Transport Layer Security) - Secure TCP</p>
</li>
<li>
<p>UDP (User Datagram Protocol) - Performance &gt; Reliability</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Application Layer</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>HTTP (Hypertext transfer protocol) - Stateless Request/Response Cycle</p>
</li>
<li>
<p>HTTPs: Secure HTTP</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>Application Layer (Layer 7) - HTTP/HTTPS/SMTP
Most apps use this layer - Web Apps/REST API(HTTP/HTTPS), Email Servers(SMTP), File Transfers(FTP)
All these apps use TCP/TLS at network layer (for reliability)</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Transport Layer (Layer 4) - TCP TLS UDP
Apps that needing high performance *directly* communicate at transport layer, gamming apps/live video streaming use UDP</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Network Layer (Layer 3) - IP</pre>
</div>
</div>
</div>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Three type of AWS ELB &gt; &gt; &gt; <strong>Classic Load Balancer</strong> (Layer 4 and Layer 7) <strong>deprecated</strong> note recomended by AWS, with support TCP, SSL/TLS and HTTP/HTTP(S) over Layer 4/7 &gt; &gt; &gt; <strong>Application Load Balancer</strong> (Layer 7) - new generation to supporting HTTP/HTTPS and advanced routing approaches &gt; &gt; &gt; <strong>Network Load Balancer</strong> (Layer 4) - New generation supporting TCP/TLS and UDP</p>
</div>
</blockquote>
</div>
<div class="ulist">
<ul>
<li>
<p>Application Load Balancer</p>
<div class="ulist">
<ul>
<li>
<p>Most Popular and frequently used ELB in AWS, support WebSockets and HTTP/HTTPs over Layer 7, with support all import lb feat, and <strong>automatically</strong> scales based on demand</p>
</li>
<li>
<p>Can load balance between</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>EC2 Instances</p>
</li>
<li>
<p>Containerized apps (Amazon ECS)</p>
</li>
<li>
<p>Web apps (using IP address)</p>
</li>
<li>
<p>Lambda can be used too, but is no used frequently most common approach in lambda is API Gateway</p>
</li>
</ol>
</div>
</li>
<li>
<p>Target Groups</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>We can group instances to alb have distributed the load, can be a set of EC2 instances, lambda function or a set of ip address</p>
</li>
</ol>
</div>
</li>
<li>
<p>Stickyness is a feat to send all request from one user to the same instance is implemented by using a cookie</p>
</li>
<li>
<p>Inbound Rules for SG can bind with the ALB security group to restrict http traffic as pic bello</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ALB_SG_RESTRICT_AND_BIND.png" alt="ALB SG RESTRICT AND BIND">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Target Group and Listeners</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Listener checks for the connection requests, but each Load Balancer can have <strong>one or more listeners</strong> listening for connection request for the client</p>
</li>
<li>
<p>Each listener has: protocol a port and a set of rules to route requests to targets</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ALB_Multiple_Listeners.png" alt="ALB Multiple Listeners">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Target Groups exists to group instances that ALB must to distribute the load between the service/instances in terraform you bind the alb listener to alb target group</p>
</li>
<li>
<p>Multiple Target Groups - In a microservices architecture we can have thousands of services spread out in our aws account, so we need multiple ALBs?
<strong><em>NOPE</em></strong> ALB can support multiple microservices instances creating a separate target group for each microservices, below a hcl-terraform snippet to explain this, <strong><em>Classic Load Balancer Not Support multiple target groups</em></strong></p>
</li>
<li>
<p>Rules are executed in the order they are configured</p>
</li>
<li>
<p>We can create rules based on <strong><em>path</em></strong> (http(s)://somehost/path_for_service_a), based on <strong><em>host</em></strong> (http(s)://somehost)/ based on headers (http(s)) and Query Strings (http(s)://somehost?target=a), based on IP Address (all request coming from a specific address)</p>
</li>
<li>
<p>In summary we have a highly decoupled architecture, ALB ca have multiple listeners and each listener have multiple rules routing to a target group</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ALB_Multiple_target_groups.png" alt="ALB Multiple target groups">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ALB_Listener_Rules.png" alt="ALB Listener Rules">
</div>
</div>
<div class="paragraph">
<p><a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/lb_listener_rule">Resource: aws_lb_listener_rule</a></p>
</div>
<div class="exampleblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre>resource "aws_lb_listener_rule" "my_listener_rule" {
  listener_arn = aws_lb_listener.my-lb-listener.arn
  priority     = 100
  action {
    type = "forward"
    target_group_arn = aws_lb_target_group.my-tg.arn
  }
  condition {
    path_pattern {
        values = ["/my-microservices-x/*"]
    }
  }
}</pre>
</div>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Possibilities are by path/host/headers/Query Strings(?target=x)/IP Address</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aws_auto_scaling_groups">AWS Auto Scaling Groups</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Target groups are configured with static set of instances to scale out (when loads increase) and scale in (when the pick of loads stop and instances became idle) automatically, we can achieve this config using <strong><em>auto scaling groups</em></strong></p>
</li>
<li>
<p>ASG can launch On-Demand instances, Spot Intance or both, to do this as best practice use Launch Template, in terraform we can use <strong><em>aws_launch_template</em></strong> as demonstred bellow, more details in ./terraform/asg-httpd|asg-nginx-reactjs</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform">resource &quot;aws_launch_template&quot; &quot;nginx-launch-template&quot; {
  name_prefix                          = &quot;nginx-launch-template&quot;
  image_id                             = data.aws_ami.ubuntu.id
  instance_type                        = var.AMZ_INSTANCE_TYPE
  key_name                             = aws_key_pair.key-pub.key_name
  user_data                            = filebase64(&quot;./reactjsapp.sh&quot;)
  vpc_security_group_ids               = [aws_security_group.sg-allow-http.id]
  instance_initiated_shutdown_behavior = &quot;terminate&quot;

  lifecycle {
    create_before_destroy = true
  }

  iam_instance_profile {
    name = aws_iam_instance_profile.ec2_ecr_iam_inst_profile.name
    #arn = aws_iam_role.ec2-ecr-role.arn
  }
}

resource &quot;aws_autoscaling_group&quot; &quot;nginx-asg&quot; {
  name             = &quot;nginx-asg&quot;
  min_size         = 1
  max_size         = 3
  desired_capacity = 2
  force_delete     = true

  # To test effect
  vpc_zone_identifier = [
    data.aws_subnet.main-public-1.id,
    data.aws_subnet.main-public-2.id,
    data.aws_subnet.main-public-3.id
  ]
  target_group_arns         = [aws_lb_target_group.alb-tg-nginx.arn]
  health_check_grace_period = 120
  health_check_type         = &quot;ELB&quot;
  enabled_metrics = [
    &quot;GroupMinSize&quot;,
    &quot;GroupMaxSize&quot;,
    &quot;GroupDesiredCapacity&quot;,
    &quot;GroupInServiceInstances&quot;,
    &quot;GroupTotalInstances&quot;
  ]
  launch_template {
    id      = aws_launch_template.nginx-launch-template.id
    version = &quot;$Latest&quot;
  }
  tag {
    key                 = &quot;Name&quot;
    value               = &quot;EC2 Micro Instance&quot;
    propagate_at_launch = true
  }

}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Auto Scaling Components</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch Configuration/Template as EC2 AMIS Customs sizes etc</p>
</li>
<li>
<p>Auto Scaling Group with min max size of this group and health checks</p>
</li>
<li>
<p>Auto Scaling policies when and how to execute scaling</p>
</li>
<li>
<p>Some policies to scaling with ASG</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ASG_UseCases.png" alt="ASG UseCases">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/ASG_Dynamic_UseCases.png" alt="ASG Dynamic UseCases">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Network Load Balancer Terraform sample</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform">resource &quot;aws_lb&quot; &quot;alb-nginx&quot; {
  name               = &quot;alb-nginx&quot;
  internal           = false
  load_balancer_type = &quot;network&quot;
  subnets            = var.AMZ_SUBNETS
  security_groups    = [aws_security_group.sg-allow-lb-http.id]

  tags = {
    Name = &quot;alb-nginx&quot;
  }

}

resource &quot;aws_lb_listener&quot; &quot;alb-listener-nginx&quot; {
  load_balancer_arn = aws_lb.alb-nginx.arn
  port              = 80
  protocol          = &quot;TCP&quot;
  default_action {
    type             = &quot;forward&quot;
    target_group_arn = aws_lb_target_group.alb-tg-nginx.arn
  }
}

resource &quot;aws_lb_target_group&quot; &quot;alb-tg-nginx&quot; {
  name        = &quot;alb-tg-nginx&quot;
  port        = 80
  protocol    = &quot;TCP&quot;
  target_type = &quot;instance&quot;
  vpc_id      = var.VPC_ID

  health_check {
    port                = 80
    interval            = 10
    path                = &quot;/&quot;
    protocol            = &quot;TCP&quot;
    timeout             = 5
    healthy_threshold   = 5
    unhealthy_threshold = 5
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serverless_architecture_pt1">Serverless Architecture Pt1</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Serverless <strong>does NOT mean</strong> "No Servers"
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Serverless means - No worry about Infrastructure, flexible scaling, automated high available, pay for use</p>
</li>
<li>
<p>With Serverless you can keep focus over the code</p>
</li>
<li>
<p>Some kind serverless Apps in AWS - Fargate, Lambda, API Gateway, Cognito, DynamoDB</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_aws_serverless_lambda">AWS Serverless Lambda</h3>
<div class="ulist">
<ul>
<li>
<p>Run your code without thinking about Servers, (but stay locked in AWS =) full vendor control)</p>
</li>
<li>
<p>AWS Lambda is the most popular choice in AWS, only about worry your code</p>
</li>
<li>
<p><mark>Pay of number of requests, duration of requests and Memory</mark></p>
</li>
<li>
<p>As a good practice is enabled X-Ray Traces</p>
</li>
<li>
<p>To ensure that a critical lambda needs always run we need specify a reserved concurrency, e.g We can reserve up to 900 Instances to a specific lambda</p>
</li>
<li>
<p>Lambda execution needs of a temporary runtime env, lambdas tries to reuse the execution context when possible, in the same execution context, object declares outside handler remain initialized, e.g Dynamodb</p>
</li>
<li>
<p>AWS reserve /tmp with 512mb disk space as caching to be reused across invocations</p>
</li>
<li>
<p>Cold start is a common problem for the first request to a lambda function is tied to the first request, to guarantee a consistent performance from lambda function we can use <strong><em>Provisioned Concurrency</em></strong>, but in this scenario we have a <mark>more expensive service</mark></p>
</li>
<li>
<p>In Provisioned with reserved concurrency scenario, more instances can come than is allowed <strong><em>throttling</em></strong> concept can be applied, and the request will receive 429 status code</p>
</li>
<li>
<p>Lambda can be invoked in both Sync/Async scenarios, in sync we have AWS API Gateway, CloudFront and Lex, to Async we have no wait for responses in aws services, we can Invoke as Task startTask over EC2 and runTask in a EC2/ECS service, we can send a SQS/SNS message when some event happens in S3, when a successful execution is done an invocation Record can be sent other message to SQS/SNS or another lambda function, but in case of fails there is a configuration options to async ops with retry, dlq and max age of event options</p>
</li>
<li>
<p>A Lambda@Edge location (Cloudfront) can be used to invoke the lambda function, but have a restriction and can be used just with to Python or Node.js (Javascript)</p>
</li>
<li>
<p>Alias can pointer to a specific version of lambda</p>
</li>
<li>
<p>Lambda code is typically dependent on other libraries, using layers we can share libs among lambdas and the <strong>size</strong> of lambda can be reduced</p>
</li>
<li>
<p>Sum up as best practices to use lambda we have, take advantage of <strong>execution context reuse</strong> to improve performance, initialize SDK clients and database connections outside of function handler, cache static assets locally in the /tmp dir <strong>env variables</strong> to pass operation parameters, <strong>minimize your deployment package size as small possible</strong>, avoid recursive code</p>
</li>
<li>
<p>Summary and tips for AWS Lambda</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/AWS_LAMBDA_Scenario_Question_01.png" alt="Scenario Questions 1">
</div>
<div class="title">Figure 1. Tips to Questions 1</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/AWS_LAMBDA_Scenario_Question_02.png" alt="Scenario Questions 2">
</div>
<div class="title">Figure 2. Tips to Questions 2</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">const AWS = require(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">aws-sdk</span><span style="color:#710">'</span></span>); <span style="color:#777">// keeps initialized in the same context</span>
const dynamo = <span style="color:#080;font-weight:bold">new</span> AWS.DynamoDB.DocumentClient();
exports.handler = async (event) =&gt; {
    <span style="color:#777">// Other Logic</span>
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<strong><em>Note when using AWS Lambda with Camel Quarkus and Terraform</em></strong>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>When we are using Terraform to deploy your function.zip file to lambda structure the handler <strong>MUST BE</strong> <mark>io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest</mark> as Terraform Snippet bellow</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform">resource &quot;aws_lambda_function&quot; &quot;hello_lambda&quot; {
  function_name    = var.AWS_LAMBDA_FUNCTION_NAME
  filename         = &quot;${path.module}/function.zip&quot;
  role             = aws_iam_role.hello_lambda_role.arn
  depends_on       = [aws_cloudwatch_log_group.hello_lambda_logging]
  runtime          = &quot;java11&quot;
  handler          = var.AWS_LAMBDA_HANDLER # pay attention here!!!
}

variable &quot;AWS_LAMBDA_HANDLER&quot; {
  default = &quot;io.quarkus.amazon.lambda.runtime.QuarkusStreamHandler::handleRequest&quot;
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/LAMBDA_NodeJS_FirstExecution_Info.png" alt="First Execution Lambda using Node.js v12.x">
</div>
<div class="title">Figure 3. First Execution Lambda using Node.js v12.x</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/LAMBDA_NodeJS_XRay_Enabled.png" alt="X-Ray Enabled Lambda using Node.js v12.x">
</div>
<div class="title">Figure 4. X-Ray Enabled Lambda using Node.js v12.x</div>
</div>
</div>
<div class="sect2">
<h3 id="_aws_api_gateway">AWS API Gateway</h3>
<div class="ulist">
<ul>
<li>
<p>Based on Resources <strong><em>todos</em></strong>, <strong><em>todos/{id}</em></strong></p>
</li>
<li>
<p>Actions - HTTPS Methods - GET, PUT, POST, DELETE</p>
</li>
<li>
<p>API Gateway can <strong><em>publish,maintain,monitor,and secure APIs at any scale</em></strong>, supports HTTP(s) and WebSockets (two-way communication - chat apps and streams dashboards)</p>
</li>
<li>
<p>REST API</p>
<div class="ulist">
<ul>
<li>
<p>Fully Featured (API Caching, Request/Response Validation, Test Invocations)</p>
</li>
</ul>
</div>
</li>
<li>
<p>HTTP API</p>
<div class="ulist">
<ul>
<li>
<p>Newer, Simple cheaper and Low latency</p>
</li>
<li>
<p>Automatic Deployments</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Approaches.png" alt="API GATEWAY Approaches">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>We can customize all lifecycle in gateway, [Method Request (Auth, Header, etc.) - Integration Request, Integration Response Method Response]</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Integration_Response.png" alt="API GATEWAY Integration Response">
</div>
<div class="title">Figure 5. Sample of Response integration Screen in AWS API Gateway</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform"># Sample of Response integration Screen in AWS API Gateway using Terraform</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Lambda_Integration.png" alt="API GATEWAY Lambda Integration">
</div>
<div class="title">Figure 6. Sample of AWS API Gateway and Lambda Integration</div>
</div>
<div class="ulist">
<ul>
<li>
<p>With mapping templates we can customize all Requests sent to Lambdas using <mark>Method Request passthrough</mark></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Mapping_Template_RequestPassthrough.png" alt="API GATEWAY Mapping Template RequestPassthrough">
</div>
<div class="title">Figure 7. Sample of Template &#8220;Method Request pass through&#8221;</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_EventDetail_MappingTemplate_Request_passthrough.png" alt="API GATEWAY EventDetail MappingTemplate Request passthrough">
</div>
<div class="title">Figure 8. Sample of Event details using Method Request pass through over Lambda Function</div>
</div>
<div class="ulist">
<ul>
<li>
<p>JSON Schema validation <a href="https://json-schema.org/learn/getting-started-step-by-step.html">JSON Schema Validation</a></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Request_Validation_Model_Schema.png" alt="API GATEWAY Request Validation Model Schema">
</div>
<div class="title">Figure 9. Sample of Validation Request Body with a Model Schema to Use over Request Body Model</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_PreDefined_Responses.png" alt="API GATEWAY PreDefined Responses">
</div>
<div class="title">Figure 10. Sample of Pre-defined Gateway Responses to BAD_REQUEST Sample</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/API_GATEWAY_Deploy_Stage.png" alt="API GATEWAY Deploy Stage">
</div>
<div class="title">Figure 11. Sample of a deploying a new Stage in AWS Gateway</div>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP API - API Gateway</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Snippet of Apache Camel and Quarkus Integration with DynamoDb</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span style="color:#007">@NoArgsConstructor</span>
<span style="color:#007">@ApplicationScoped</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyRouter</span> <span style="color:#088;font-weight:bold">extends</span> RouteBuilder {

  <span style="color:#007">@Inject</span>
  DynamoDbClient dbClient;

  <span style="color:#007">@Override</span>
  <span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">void</span> configure() {

    from(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">timer://myTimer?period=10s&amp;fixedRate=true</span><span style="color:#710">&quot;</span></span>)
            .process(e -&gt; {
              <span style="color:#339;font-weight:bold">var</span> key = <span style="color:#080;font-weight:bold">new</span> <span style="color:#0a8;font-weight:bold">HashMap</span>();
              key.put(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Language</span><span style="color:#710">&quot;</span></span>, AttributeValue.builder().s(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Java</span><span style="color:#710">&quot;</span></span>).build());
              e.getIn().setHeader(Ddb2Constants.KEY, key);
              <span style="color:#777">//e.getIn().setHeader(Ddb2Constants.ATTRIBUTE_NAMES, key.keySet()); // comment to return all attributes table</span>
            })
            .to(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">aws2-ddb://LanguageStatistic-table?operation=getItem</span><span style="color:#710">&quot;</span></span>)
            <span style="color:#777">/*.process(e-&gt; {

                var response =  (Map&lt;String, AttributeValue&gt;) e.getIn().getHeader(Ddb2Constants.ATTRIBUTES);
                e.getIn().setBody(response);

            })*/</span>
            .to(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">bean:myBean</span><span style="color:#710">&quot;</span></span>)
            <span style="color:#777">//.convertBodyTo(String.class)</span>
            .log(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">${body}</span><span style="color:#710">&quot;</span></span>);
  }
}

<span style="color:#007">@Named</span>
<span style="color:#007">@NoArgsConstructor</span>
<span style="color:#007">@ApplicationScoped</span>
<span style="color:#007">@RegisterForReflection</span>
<span style="color:#088;font-weight:bold">public</span> <span style="color:#339;font-weight:bold">class</span> <span style="color:#B06;font-weight:bold">MyBean</span> {

  <span style="color:#007">@Handler</span>
  <span style="color:#088;font-weight:bold">public</span> MyDto fromMyDto(<span style="color:#088;font-weight:bold">final</span> <span style="color:#007">@Header</span>(Ddb2Constants.ATTRIBUTES) <span style="color:#0a8;font-weight:bold">Map</span>&lt;<span style="color:#0a8;font-weight:bold">String</span>, AttributeValue&gt; myDynamoDbHeader) {
    <span style="color:#339;font-weight:bold">var</span> score = myDynamoDbHeader.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Score</span><span style="color:#710">&quot;</span></span>).n();
    <span style="color:#339;font-weight:bold">var</span> language = myDynamoDbHeader.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Language</span><span style="color:#710">&quot;</span></span>).s();
    <span style="color:#080;font-weight:bold">return</span> <span style="color:#080;font-weight:bold">new</span> MyDto(score, language);
  }

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Snippet of Terraform Custom Runtime AWS Lambda</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="hcl-terraform">resource &quot;aws_lambda_function&quot; &quot;hello_lambda&quot; {
  function_name    = var.AWS_LAMBDA_FUNCTION_NAME
  filename         = &quot;${path.module}/function.zip&quot;
  role             = aws_iam_role.hello_lambda_role.arn
  depends_on       = [aws_cloudwatch_log_group.hello_lambda_logging]
  runtime          = &quot;provided&quot; // Native execution using Java + GraalVM
  handler          = var.AWS_LAMBDA_HANDLER
  memory_size      = 128 // Native execution using Java + GraalVM
  source_code_hash = base64sha256(&quot;${path.module}/../../mp-lambda-quarkus/target/function.zip&quot;)
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/AWS_Zulu_JDK_Lambda_FIrst_Processing.png" alt="First AWS Lambda Execution Using Java JDK 17">
</div>
<div class="title">Figure 12. AWS Lambda First Execution using Java Zulu OpenJDK 17 (Quarkus/Apache Camel/Dynamodb)</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/AWS_Lambda_GraalVM_Native_FIrst_Processing.png" alt="First AWS Lambda Execution Using GraalVM Native Execution and Custom Runtime">
</div>
<div class="title">Figure 13. AWS Lambda First Execution using GraalVM</div>
</div>
<div class="imageblock">
<div class="content">
<img src="content/pic/AWS_Lambda_GraalVM_Native_Nth_Processing.png" alt="Nth AWS Lambda Execution Using GraalVM Native Execution and Custom Runtime">
</div>
<div class="title">Figure 14. AWS Lambda Nth Execution using GraalVM</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-01-08 15:06:35 -0300
</div>
</div>
</body>
</html>